{% extends 'dashboard_base.html' %}
{% load static %}
{% block content %}

<div class="main-content">
  <div class="main-content-inner">
    <div class="main-content-wrap">
      <div class="flex items-center flex-wrap justify-between gap20 mb-27">
        <h3>My Leads</h3>
      </div>

      <div class="wg-box">
        <div class="wg-table table-product-list">
          <ul class="table-title flex gap20 mb-14">
            <li><div class="body-title">Client</div></li>
            <li><div class="body-title">Property</div></li>
            <li><div class="body-title">Status</div></li>
            <li><div class="body-title">Created</div></li>
            <li><div class="body-title">Action</div></li>
          </ul>

          {% if leads %}
          <ul class="flex flex-column">
            {% for lead in leads %}
            <li class="product-item gap14">
              <div class="image no-bg">
                {% if lead.property_link.main_image %}
                  <img src="{{ lead.property_link.main_image.url }}" alt="{{ lead.property_link.title }}">
                {% endif %}
              </div>

              <div class="flex items-center justify-between gap20 flex-grow">
                <div class="name">
                  <a href="#" class="body-title-2">{{ lead.user.email }}</a>
                </div>
                <div class="body-text">{{ lead.property_link.title }}</div>
                <div class="body-text">{{ lead.get_status_display }}</div>
                <div class="body-text">{{ lead.created_at|date:"M d, Y" }}</div>

                <div class="list-icon-function">
                  <div class="item eye">
                    <a href="{% url 'property:lead_detail' lead.pk %}">
                      <i class="icon-eye"></i>
                    </a>
                  </div>
                </div>
              </div>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <div class="p-4 text-center">
            <p class="body-text">You haven’t created any leads yet.</p>
            <p><a href="{% url 'property:favorite_list' %}" class="tf-button btn-fill btn-sm">View Favorites</a></p>
          </div>
          {% endif %}
        </div>

        <div class="divider"></div>
        {% include 'partials/paginations.html' with page_obj=leads %}
      </div>
    </div>
  </div>

  <div class="bottom-page">
    <div class="body-text">Copyright © 2025 REM. Design with</div>
    <i class="icon-heart"></i>
    <div class="body-text">by <a href="#">REM</a>. All rights reserved.</div>
  </div>
</div>

{% endblock content %}
