{% extends 'base.html' %}
{% load static %}
{% block content %}

{% include 'partials/messages.html' %}


<!-- .main-content -->
<div class="page-content  ">
  <!-- page-blog-details -->
  <section class="section-agents-details  tf-spacing-4 pt-0">
    <div class="tf-container">
      <div class="row">
        <div class="col-lg-8 ">
          <div class="agent-details hover-img effec-overlay mb-48">
            <div class="image-wrap ">
              <a href="agents-details.html">
                <img class="lazyload" data-src="{{ agent.get_profile_picture}}" src="{{ agent.get_profile_picture}}"
                  alt="">
              </a>
              <ul class="tf-social style-3">
                <li><a href="#"><i class="icon-fb"></i></a></li>
                <li><a href="#"><i class="icon-X"></i></a></li>
                <li><a href="#"><i class="icon-linked"></i></a></li>
                <li><a href="#"><i class="icon-ins"></i></a></li>
              </ul>
            </div>
            <div class="content-inner">
              <div class="author">
                <h4 class="name "> <a href="#">{{ agent.user.name }}</a></h4>
                <p class="font-poppins">Company Agent at <a href="#" class="fw-7">{{ agent.company_name}}</a>
                </p>
              </div>
              <ul class="info">
                <li> <svg width="16" height="17" viewbox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M9.5 7V4M9.5 7H12.5M9.5 7L13.5 3M11.5 15C5.97733 15 1.5 10.5227 1.5 5V3.5C1.5 3.10218 1.65804 2.72064 1.93934 2.43934C2.22064 2.15804 2.60218 2 3 2H3.91467C4.25867 2 4.55867 2.234 4.642 2.568L5.37933 5.51667C5.45267 5.81 5.34333 6.118 5.10133 6.29867L4.23933 6.94533C4.11595 7.03465 4.02467 7.16138 3.97903 7.3067C3.93339 7.45202 3.93584 7.60818 3.986 7.752C4.38725 8.84341 5.02094 9.83456 5.84319 10.6568C6.66544 11.4791 7.65659 12.1128 8.748 12.514C9.042 12.622 9.36667 12.5113 9.55467 12.2607L10.2013 11.3987C10.2898 11.2805 10.4113 11.1911 10.5504 11.1416C10.6895 11.0922 10.8401 11.0849 10.9833 11.1207L13.932 11.858C14.2653 11.9413 14.5 12.2413 14.5 12.5853V13.5C14.5 13.8978 14.342 14.2794 14.0607 14.5607C13.7794 14.842 13.3978 15 13 15H11.5Z"
                      stroke="#8E8E93" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                  <span class="font-mulish fw-7">{{ agent.office_phone_no}}</span>
                </li>
                <li><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M14.5 4.5V11.5C14.5 11.8978 14.342 12.2794 14.0607 12.5607C13.7794 12.842 13.3978 13 13 13H3C2.60218 13 2.22064 12.842 1.93934 12.5607C1.65804 12.2794 1.5 11.8978 1.5 11.5V4.5M14.5 4.5C14.5 4.10218 14.342 3.72064 14.0607 3.43934C13.7794 3.15804 13.3978 3 13 3H3C2.60218 3 2.22064 3.15804 1.93934 3.43934C1.65804 3.72064 1.5 4.10218 1.5 4.5M14.5 4.5V4.662C14.5 4.9181 14.4345 5.16994 14.3096 5.39353C14.1848 5.61712 14.0047 5.80502 13.7867 5.93933L8.78667 9.016C8.55014 9.16169 8.2778 9.23883 8 9.23883C7.7222 9.23883 7.44986 9.16169 7.21333 9.016L2.21333 5.94C1.99528 5.80569 1.81525 5.61779 1.69038 5.3942C1.56551 5.1706 1.49997 4.91876 1.5 4.66267V4.5"
                      stroke="#8E8E93" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                  <a href="#">{{ agent.user.email }}</a>
                </li>
                <li>
                  <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M10 7C10 7.53043 9.78929 8.03914 9.41421 8.41421C9.03914 8.78929 8.53043 9 8 9C7.46957 9 6.96086 8.78929 6.58579 8.41421C6.21071 8.03914 6 7.53043 6 7C6 6.46957 6.21071 5.96086 6.58579 5.58579C6.96086 5.21071 7.46957 5 8 5C8.53043 5 9.03914 5.21071 9.41421 5.58579C9.78929 5.96086 10 6.46957 10 7Z"
                      stroke="#8E8E93" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path
                      d="M13 7C13 11.7613 8 14.5 8 14.5C8 14.5 3 11.7613 3 7C3 5.67392 3.52678 4.40215 4.46447 3.46447C5.40215 2.52678 6.67392 2 8 2C9.32608 2 10.5979 2.52678 11.5355 3.46447C12.4732 4.40215 13 5.67392 13 7Z"
                      stroke="#8E8E93" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>

                  {{ agent.office_address }}
                </li>
              </ul>
              <div class="content">
                <h6 class="title">About {{ agent.user.name}}</h6>
                <p class="text-1">{{agent.description }}</p>
                <div class="wrap-btn-icon">
                  <!-- Update this line to include agent ID -->
                  <a class="tf-btn bg-color-primary btn-sm" style="margin:10px"
                    href="{% url 'notification:message_create_to_agent' receiver_id=agent.user.id %}" class="btn-icon"
                    title="Chat with Agent">
                    <i class="bi bi-chat-dots"></i> Chat Me
                  </a>
                </div>
                {% comment %} <a href="blog-single.html" class="tf-btn-link ">
                  <span>
                    Read More
                  </span> <svg width="20" height="20" viewbox="0 0 20 20" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_2450_13860)">
                      <path
                        d="M10.0013 18.3334C14.6037 18.3334 18.3346 14.6024 18.3346 10C18.3346 5.39765 14.6037 1.66669 10.0013 1.66669C5.39893 1.66669 1.66797 5.39765 1.66797 10C1.66797 14.6024 5.39893 18.3334 10.0013 18.3334Z"
                        stroke="#F1913D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                      <path d="M6.66797 10H13.3346" stroke="#F1913D" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round"></path>
                      <path d="M10 13.3334L13.3333 10L10 6.66669" stroke="#F1913D" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                    <defs>
                      <clippath id="clip0_2450_13860">
                        <rect width="20" height="20" fill="white"></rect>
                      </clippath>
                    </defs>
                  </svg>
                </a> {% endcomment %}
              </div>
            </div>
          </div>
          <div class="wg-listing">
            {% comment %} <div class="heading">
              <div class="text-7 fw-6 text-color-heading">Listing</div>
              <div class="tf-houese-filter">
                <div class="tf-btns-filter text-1 tf-tab-link_all is--active" id="all">
                  <span>All</span>
                </div>
                <div class="tf-btns-filter text-1 fw-3" id="tf_filter_rent">
                  <span>For rent</span>
                </div>
                <div class="tf-btns-filter text-1 fw-3" id="tf_filter_sale">
                  <span>For sale</span>
                </div>
              </div>
            </div> {% endcomment %}
            <div id="parent" class=" tf-grid-layout md-col-2">
              {% for listing in properties %}
              <div class="tf_filter_rent tf-filter-item tf-tab-content">
                <div class="box-house hover-img">
                  <div class="image-wrap">
                    <a href="property-detail-v1.html">
                      <img class="lazyload" data-src="{{ listing.main_image_url }}" src="{{ listing.main_image_url }}"
                        alt="">
                    </a>
                    <ul class="box-tag flex gap-8 ">
                      {% comment %} <li class="flat-tag text-4 bg-main fw-6 text_white">Featured</li> {% endcomment %}
                      <li class="flat-tag text-4 bg-3 fw-6 text_white">{{ listing.property_listing }}</li>
                    </ul>
                    {% include 'partials/_favorite_button.html' %}
                  </div>
                  <div class="content">
                    <h5 class="title">
                      <a href="{% url 'home:rent_property_detail' listing.slug %}">{{ listing.title }}</a>

                    </h5>
                    <p class="location text-1 flex items-center gap-6">
                      <i class="icon-location"></i> {{ listing.location }}
                    </p>
                    <ul class="meta-list flex">
                      <li class="text-1 flex"><span>{{ listing.bedrooms }}</span>Beds</li>
                      <li class="text-1 flex"><span>{{ listing.bathrooms }}</span>Baths</li>
                      <li class="text-1 flex"><span>{{ listing.sqft}}</span>Sqft</li>
                    </ul>
                    <div class="bot flex justify-between items-center">
                      <h5 class="price">
                        ${{ listing.price }}
                      </h5>
                      <div class="wrap-btn flex">
                        {% comment %} <a href="#" class="compare flex gap-8 items-center text-1">
                          <i class="icon-compare"></i>
                          Compare
                        </a> {% endcomment %}
                        <a href="{% url 'home:rent_property_detail' listing.slug %}"
                          class="tf-btn style-border pd-4">Details</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}

            </div>
          </div>
          {% if properties.has_other_pages %}
          <ul class="wg-pagination">
            {% if properties.has_previous %}
            <li class="arrow">
              <a href="?page={{ properties.previous_page_number }}"><i class="icon-arrow-left"></i></a>
            </li>
            {% else %}
            <li class="arrow disabled">
              <span><i class="icon-arrow-left"></i></span>
            </li>
            {% endif %}

            {# Show up to 3 pages before and after current #}
            {% for num in properties.paginator.page_range %}
            {% if num == properties.number %}
            <li class="active">
              <span>{{ num }}</span>
            </li>
            {% elif num >= properties.number|add:-2 and num <= properties.number|add:2 %}
            <li>
              <a href="?page={{ num }}">{{ num }}</a>
            </li>
            {% elif num == 1 or num == properties.paginator.num_pages %}
            <li>
              <a href="?page={{ num }}">{{ num }}</a>
            </li>
            {% elif num == properties.number|add:-3 or num == properties.number|add:3 %}
            <li><span>...</span></li>
            {% endif %}
            {% endfor %}

            {% if properties.has_next %}
            <li class="arrow">
              <a href="?page={{ properties.next_page_number }}"><i class="icon-arrow-right"></i></a>
            </li>
            {% else %}
            <li class="arrow disabled">
              <span><i class="icon-arrow-right"></i></span>
            </li>
            {% endif %}
          </ul>
          {% endif %}

        </div>
        <div class="col-lg-4 ">
          <div class="tf-sidebar">
            <form method="post" action="" class="form-contact-agent style-2 mb-30">
              {% csrf_token %}
              <h4 class="heading-title mb-30">Contact Me</h4>
              <fieldset>
                <input type="text" class="form-control" placeholder="Your name" name="name" required>
              </fieldset>
              <fieldset>
                <input type="email" class="form-control" placeholder="Email" name="email" required>
              </fieldset>
              <fieldset class="phone">
                <input type="text" class="form-control" placeholder="Your phone number" name="phone" required>
              </fieldset>
              <fieldset>
                <textarea name="message" cols="30" rows="10" placeholder="Message" required></textarea>
              </fieldset>
              <div class="wrap-btn">
                <button type="submit" class="tf-btn bg-color-primary w-full">
                  <svg width="20" height="20" ...></svg>Send message
                </button>
              </div>
            </form>
            
            {% comment %} <div class="sidebar-item sidebar-featured style-2  pb-36 mb-28">
              <h4 class="sidebar-title mb-28 ">Featured Listings</h4>
              <ul>
                <li class="box-listings style-2 hover-img">
                  <div class="image-wrap">
                    <img class="lazyload" data-src="images/section/box-listing-1.jpg"
                      src="{% static 'images/section/box-listing-1.jpg' %}" alt="">
                  </div>
                  <div class="content">
                    <div class="text-1 title fw-5 lh-20">
                      <a href="property-detail-v1.html">Casa Lomas de Machalí Machas</a>
                    </div>
                    <ul class="meta-list flex">
                      <li class="text-1 flex"><span>3</span>Bed</li>
                      <li class="text-1 flex"><span>3</span>Bath</li>
                      <li class="text-1 flex"><span>4,043</span>Sqft</li>
                    </ul>
                    <div class="price text-1 lh-20 fw-6">$7250,00</div>
                  </div>
                </li>
                <li class="box-listings style-2 hover-img">
                  <div class=" image-wrap">
                    <img class="lazyload" data-src="images/section/box-listing-2.jpg"
                      src="{% static 'images/section/box-listing-2.jpg' %}" alt="">
                  </div>
                  <div class="content">
                    <div class="text-1 title fw-5 lh-20">
                      <a href="property-detail-v1.html">Casa Lomas de Machalí Machas</a>
                    </div>
                    <ul class="meta-list flex">
                      <li class="text-1 flex"><span>3</span>Bed</li>
                      <li class="text-1 flex"><span>3</span>Bath</li>
                      <li class="text-1 flex"><span>4,043</span>Sqft</li>
                    </ul>
                    <div class="price text-1 lh-20 fw-6">$7250,00</div>

                  </div>
                </li>
                <li class="box-listings style-2 hover-img">
                  <div class=" image-wrap">
                    <img class="lazyload" data-src="images/section/box-listing-3.jpg"
                      src="{% static 'images/section/box-listing-3.jpg' %}" alt="">
                  </div>
                  <div class="content">
                    <div class="text-1 title fw-5 lh-20">
                      <a href="property-detail-v1.html">Casa Lomas de Machalí Machas</a>
                    </div>
                    <ul class="meta-list flex">
                      <li class="text-1 flex"><span>3</span>Bed</li>
                      <li class="text-1 flex"><span>3</span>Bath</li>
                      <li class="text-1 flex"><span>4,043</span>Sqft</li>
                    </ul>
                    <div class="price text-1 lh-20 fw-6">$7250,00</div>

                  </div>
                </li>
                <li class="box-listings style-2 hover-img">
                  <div class=" image-wrap">
                    <img class="lazyload" data-src="images/section/box-listing-4.jpg"
                      src="{% static 'images/section/box-listing-4.jpg' %}" alt="">
                  </div>
                  <div class="content">
                    <div class="text-1 title fw-5 lh-20">
                      <a href="property-detail-v1.html">Casa Lomas de Machalí Machas</a>
                    </div>
                    <ul class="meta-list flex">
                      <li class="text-1 flex"><span>3</span>Bed</li>
                      <li class="text-1 flex"><span>3</span>Bath</li>
                      <li class="text-1 flex"><span>4,043</span>Sqft</li>
                    </ul>
                    <div class="price text-1 lh-20 fw-6">$7250,00</div>
                  </div>
                </li>
                <li class="box-listings style-2 hover-img">
                  <div class=" image-wrap">
                    <img class="lazyload" data-src="images/section/box-listing-5.jpg"
                      src="{% static 'images/section/box-listing-5.jpg' %}" alt="">
                  </div>
                  <div class="content">
                    <div class="text-1 title fw-5 lh-20">
                      <a href="property-detail-v1.html">Casa Lomas de Machalí Machas</a>
                    </div>
                    <ul class="meta-list flex">
                      <li class="text-1 flex"><span>3</span>Bed</li>
                      <li class="text-1 flex"><span>3</span>Bath</li>
                      <li class="text-1 flex"><span>4,043</span>Sqft</li>
                    </ul>
                    <div class="price text-1 lh-20 fw-6">$7250,00</div>

                  </div>
                </li>
              </ul>
            </div>

            <div class=" sidebar-ads">
              <div class="image-wrap">
                <img class="lazyload" data-src="images/blog/ads.jpg" src="{% static 'images/blog/ads.jpg' %}" alt="">
              </div>
              <div class="logo relative z-5">
                <img src="{% static 'images/logo/logo-2%402x.png' %}" alt="">
              </div>
              <div class="box-ads relative z-5">
                <div class="content ">
                  <h4 class="title"><a href="property-detail-v1.html">We can help you find a
                      local real estate agent</a> </h4>
                  <div class="text-addres ">
                    <p>Connect with a trusted agent who knows the market inside out -
                      whether you’re buying or selling.</p>
                  </div>
                </div>
                <a href="#" class="tf-btn fw-6 bg-color-primary w-full">
                  Connect with an agent
                </a>
              </div>
            </div> {% endcomment %}
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- /page-blog-details -->


  <!-- section-CTA -->
  {% comment %} <section class="section-CTA">
    <div class="tf-container">
      <div class="row">
        <div class="col-12">
          <div class="content-inner">
            <img src="{% static 'images/section/cta.png' %}" alt="">
            <div class="content">
              <h4 class="text_white mb-8 ">Find a Local Real Estate Agent Today</h4>
              <p class="text_white text-1">If you’re looking to buy or sell a home. We’ll help you
                make
                the most money
                possible.</p>
            </div>
            <a href="#" class="tf-btn style-2 fw-6 ">Find your location agent <i
                class="icon-MagnifyingGlass fw-6"></i></a>
          </div>
        </div>
      </div>
    </div>
  </section> {% endcomment %}
  <!-- /section-CTA -->
</div>
<!-- /main-content -->

{% endblock content %}
