{% extends "base.html" %} {% load static humanize %} {% block title %}Start
Subscription{% endblock %} {% block content %}
<div class="container py-5 mb-5">
  {% include 'partials/messages.html' %}
  <!-- Section Header -->
  <div class="text-center mb-5">
    <h1 class="fw-bold display-5 mb-3" style="color: #333">
      Choose Your Perfect Plan
    </h1>
    <p class="text-muted fs-5 mb-4">
      Flexible plans designed to help you grow your business
    </p>

  </div>

  <div class="row justify-content-center g-4">
    {% for plan in plans %}
    <div class="col-lg-4 col-md-6">
      <div
        class="card h-100 shadow-lg border-0 rounded-4 overflow-hidden position-relative plan-card {% if plan.is_popular %}popular-plan{% endif %}"
        style="transition: all 0.4s ease; border-top: 5px solid {% if plan.is_popular %}#ecaa3c{% else %}#f0f0f0{% endif %};"
      >
        <div
          class="card-body d-flex flex-column text-center p-4 position-relative"
        >
          <!-- Popular Badge -->
          {% if plan.is_popular %}
          <div class="position-absolute top-0 start-50 translate-middle-x mt-2">
            <span
              class="badge rounded-pill px-3 py-2 text-white fw-medium shadow-sm"
              style="
                background: linear-gradient(135deg, #ecaa3c, #d3912e);
                font-size: 0.85rem;
              "
            >
              ⭐ Most Popular
            </span>
          </div>
          {% endif %}

          <!-- Plan Icon -->
          <div class="mb-3">
            <div
              class="icon-wrapper mx-auto rounded-circle d-flex align-items-center justify-content-center mb-3"
              style="width: 70px; height: 70px; background: {% if plan.is_popular %}linear-gradient(135deg, #ecaa3c, #d3912e){% else %}#f8f9fa{% endif %};"
            >
              <i
                class="bi {% if plan.is_popular %}bi-star-fill{% else %}bi-{% if forloop.first %}person{% else %}people{% endif %}-fill{% endif %} fs-4"
                style="color: {% if plan.is_popular %}#fff{% else %}#ecaa3c{% endif %};"
              ></i>
            </div>
          </div>

          <!-- Plan Title -->
          <h4 class="fw-bold mb-2" style="color: #333">
            {{ plan.get_name_display }}
          </h4>

          <!-- Description -->
          <p class="text-muted small mb-3">{{ plan.description }}</p>

          <!-- Price -->
          <div class="mb-4">
            <h2 class="fw-bold mb-0" style="color: #ecaa3c">
              ₦{{ plan.price|floatformat:0|intcomma }}
            </h2>
            <p class="text-muted">{{ plan.plan }}</p>
          </div>

          <!-- Features -->
          <ul
            class="list-unstyled small text-start mx-auto mb-4"
            style="max-width: 260px"
          >
            {% for feature in plan.features %}
            <li class="mb-3 d-flex align-items-start">
              <i
                class="bi bi-check-circle-fill me-2 mt-1 flex-shrink-0"
                style="color: #ecaa3c"
              ></i>
              <span>{{ feature }}</span>
            </li>
            {% endfor %}
          </ul>

          <!-- Subscribe Button -->
          <div class="mt-auto pt-3">
            <form
              action="{% url 'subscriptions:initiate_payment' plan.id %}"
              method="POST"
            >
              {% csrf_token %}
              <input type="hidden" name="plan" value="{{ plan.code }}" />
              <button
                type="submit"
                class="btn w-100 fw-semibold text-white py-3 rounded-pill position-relative overflow-hidden"
                style="background: {% if plan.is_popular %}linear-gradient(135deg, #ecaa3c, #d3912e){% else %}#ecaa3c{% endif %}; border:none; transition: all 0.3s ease;"
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 15px rgba(236, 170, 60, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';"
              >
                <span class="position-relative z-1">Subscribe Now</span>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- FAQ Section -->
  <div class="row justify-content-center mt-5 pt-5">
    <div class="col-lg-8 text-center">
      <h3 class="fw-bold mb-4" style="color: #333">
        Frequently Asked Questions
      </h3>
      <div class="accordion" id="faqAccordion">
        <div class="accordion-item border-0 mb-3 rounded-3 shadow-sm">
          <h2 class="accordion-header" id="headingOne">
            <button
              class="accordion-button collapsed rounded-3"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseOne"
              aria-expanded="false"
              aria-controls="collapseOne"
            >
              Can I change my plan later?
            </button>
          </h2>
          <div
            id="collapseOne"
            class="accordion-collapse collapse"
            aria-labelledby="headingOne"
            data-bs-parent="#faqAccordion"
          >
            <div class="accordion-body">
              Yes, you can upgrade or downgrade your plan at any time. Changes
              will be prorated based on your billing cycle.
            </div>
          </div>
        </div>
        <div class="accordion-item border-0 mb-3 rounded-3 shadow-sm">
          <h2 class="accordion-header" id="headingTwo">
            <button
              class="accordion-button collapsed rounded-3"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseTwo"
              aria-expanded="false"
              aria-controls="collapseTwo"
            >
              Is there a free trial available?
            </button>
          </h2>
          <div
            id="collapseTwo"
            class="accordion-collapse collapse"
            aria-labelledby="headingTwo"
            data-bs-parent="#faqAccordion"
          >
            <div class="accordion-body">
              We offer a 30-day free trial on our premium plans. No credit card
              required to start your trial.
            </div>
          </div>
        </div>
        <div class="accordion-item border-0 rounded-3 shadow-sm">
          <h2 class="accordion-header" id="headingThree">
            <button
              class="accordion-button collapsed rounded-3"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseThree"
              aria-expanded="false"
              aria-controls="collapseThree"
            >
              What payment methods do you accept?
            </button>
          </h2>
          <div
            id="collapseThree"
            class="accordion-collapse collapse"
            aria-labelledby="headingThree"
            data-bs-parent="#faqAccordion"
          >
            <div class="accordion-body">
              We accept all major credit cards, PayPal, and bank transfers for
              annual plans.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<script>
  // Simple toggle animation for billing period
  document
    .getElementById("billingToggle")
    .addEventListener("change", function () {
      const cards = document.querySelectorAll(".plan-card");
      cards.forEach((card) => {
        card.style.transform = "scale(0.95)";
        setTimeout(() => {
          card.style.transform = "";
        }, 300);
      });
    });
</script>
{% endblock %}
