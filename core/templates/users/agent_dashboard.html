{% extends 'dashboard_base.html' %}
{% load static humanize %}
{% block content %}

<!-- main-content -->
<div class="main-content">
  <div class="main-content-inner">
    <div class="main-content-wrap">
      <div class="tf-section-4 mb-30">

        <!-- Total Deals Closed -->
        <div class="wg-chart-default">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap14">
              <div class="image">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52" fill="none">
                  <path opacity="0.08"
                    d="M19.1086 2.12943C22.2027 0.343099 26.0146 0.343099 29.1086 2.12943L42.4913 9.85592C45.5853 11.6423 47.4913 14.9435 47.4913 18.5162V33.9692C47.4913 37.5418 45.5853 40.8431 42.4913 42.6294L29.1086 50.3559C26.0146 52.1423 22.2027 52.1423 19.1086 50.3559L5.72596 42.6294C2.63194 40.8431 0.725956 37.5418 0.725956 33.9692V18.5162C0.725956 14.9435 2.63195 11.6423 5.72596 9.85592L19.1086 2.12943Z"
                    fill="url(#paint0_linear_53_110)" />
                </svg>
                <i class="icon-briefcase"></i>
              </div>
              <div>
                <div class="body-text mb-2">Total Deals Closed</div>
                <h4>{{ total_deals_closed|default:"0" }}</h4>
              </div>
            </div>
            <div class="box-icon-trending up">
              <i class="icon-trending-up"></i>
              <div class="body-title number">+3.2%</div>
            </div>
          </div>
          <div class="wrap-chart">
            <div id="line-chart-1"></div>
          </div>
        </div>

        <!-- Total Commission Earned -->
        <div class="wg-chart-default">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap14">
              <div class="image">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52" fill="none">
                  <path opacity="0.08"
                    d="M19.1086 2.12943C22.2027 0.343099 26.0146 0.343099 29.1086 2.12943L42.4913 9.85592C45.5853 11.6423 47.4913 14.9435 47.4913 18.5162V33.9692C47.4913 37.5418 45.5853 40.8431 42.4913 42.6294L29.1086 50.3559C26.0146 52.1423 22.2027 52.1423 19.1086 50.3559L5.72596 42.6294C2.63194 40.8431 0.725956 37.5418 0.725956 33.9692V18.5162C0.725956 14.9435 2.63195 11.6423 5.72596 9.85592L19.1086 2.12943Z"
                    fill="url(#paint0_linear_53_110)" />
                </svg>
                <i class="icon-dollar-sign"></i>
              </div>
              <div>
                <div class="body-text mb-2">Total Commission Earned</div>
                <h4>₦{{ total_commission_earned|floatformat:2|intcomma|default:"0.00" }}</h4>
              </div>
            </div>
            <div class="box-icon-trending up">
              <i class="icon-trending-up"></i>
              <div class="body-title number">+5.4%</div>
            </div>
          </div>
          <div class="wrap-chart">
            <div id="line-chart-2"></div>
          </div>
        </div>

        <!-- Active Listings -->
        <div class="wg-chart-default">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap14">
              <div class="image">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52" fill="none">
                  <path opacity="0.08"
                    d="M19.1086 2.12943C22.2027 0.343099 26.0146 0.343099 29.1086 2.12943L42.4913 9.85592C45.5853 11.6423 47.4913 14.9435 47.4913 18.5162V33.9692C47.4913 37.5418 45.5853 40.8431 42.4913 42.6294L29.1086 50.3559C26.0146 52.1423 22.2027 52.1423 19.1086 50.3559L5.72596 42.6294C2.63194 40.8431 0.725956 37.5418 0.725956 33.9692V18.5162C0.725956 14.9435 2.63195 11.6423 5.72596 9.85592L19.1086 2.12943Z"
                    fill="url(#paint0_linear_53_110)" />
                </svg>
                <i class="icon-home"></i>
              </div>
              <div>
                <div class="body-text mb-2">Active Listings</div>
                <h4>{{ active_listings|default:"0" }}</h4>
              </div>
            </div>
            <div class="box-icon-trending">
              <i class="icon-trending-up"></i>
              <div class="body-title number">Stable</div>
            </div>
          </div>
          <div class="wrap-chart">
            <div id="line-chart-3"></div>
          </div>
        </div>

        <!-- Property Views -->
        <div class="wg-chart-default">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap14">
              <div class="image">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52" fill="none">
                  <path opacity="0.08"
                    d="M19.1086 2.12943C22.2027 0.343099 26.0146 0.343099 29.1086 2.12943L42.4913 9.85592C45.5853 11.6423 47.4913 14.9435 47.4913 18.5162V33.9692C47.4913 37.5418 45.5853 40.8431 42.4913 42.6294L29.1086 50.3559C26.0146 52.1423 22.2027 52.1423 19.1086 50.3559L5.72596 42.6294C2.63194 40.8431 0.725956 37.5418 0.725956 33.9692V18.5162C0.725956 14.9435 2.63195 11.6423 5.72596 9.85592L19.1086 2.12943Z"
                    fill="url(#paint0_linear_53_110)" />
                </svg>
                <i class="icon-eye"></i>
              </div>
              <div>
                <div class="body-text mb-2">Property Views</div>
                <h4>{{ total_property_views|intcomma|default:"0" }}</h4>
              </div>
            </div>
            <div class="box-icon-trending up">
              <i class="icon-trending-up"></i>
              <div class="body-title number">+8.9%</div>
            </div>
          </div>
          <div class="wrap-chart">
            <div id="line-chart-4"></div>
          </div>
        </div>
      </div>

      <!-- Property Overview -->
      <div class="tf-section">
        <div class="wg-box">
          <div class="flex items-center justify-between">
            <h5>Property Overview</h5>
            <div class="dropdown default">
              <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <span class="view-all">View all<i class="icon-chevron-down"></i></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a href="#">This Week</a></li>
                <li><a href="#">This Month</a></li>
              </ul>
            </div>
          </div>

          <div class="wg-table table-product-overview t1">
            <ul class="table-title flex gap20 mb-14">
              <li><div class="body-title">Property</div></li>
              <li><div class="body-title">Location</div></li>
              <li><div class="body-title">Type</div></li>
              <li><div class="body-title">Price / Rent</div></li>
              <li><div class="body-title">Views</div></li>
              <li><div class="body-title">Status</div></li>
            </ul>
            <div class="divider mb-14"></div>

            <ul class="flex flex-column gap10">
              {% for property in property_overview %}
              <li class="product-item gap14">
                {% comment %} <div class="image no-bg">
                  {% if property.main_image %}
                    <img src="{{ property.main_image.url }}" alt="{{ property.title }}">
                  {% else %}
                    <img src="{% static '/assets/images/properties/default.jpg' %}" alt="No Image">
                  {% endif %}
                </div> {% endcomment %}
                <div class="flex items-center justify-between flex-grow gap20">
                  <div class="name"><a href="#" class="body-text">{{ property.title }}</a></div>
                  <div class="body-text">{{ property.location }}</div>
                  <div class="body-text">{{ property.property_listing|capfirst }}</div>
                  <div class="body-text">₦{{ property.price|intcomma }}</div>
                  <div class="body-text">{{ property.view_count|default:"0" }}</div>
                  {% if property.is_available %}
                    <div><div class="block-available">Active</div></div>
                  {% else %}
                    <div><div class="block-not-available">Sold / Rented</div></div>
                  {% endif %}
                </div>
              </li>
              {% empty %}
              <li class="body-text text-center py-4 text-gray-400">No properties found.</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- bottom-page -->
  <div class="bottom-page">
    <div class="body-text">Copyright © 2025 REM. Designed by</div>
    <i class="icon-heart"></i>
    <div class="body-text"><a href="#">REM</a> — All rights reserved.</div>
  </div>
</div>

{% endblock content %}
